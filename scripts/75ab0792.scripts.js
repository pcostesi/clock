"use strict";angular.module("clockApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/tick",{templateUrl:"views/tick.html",controller:"TickCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("clockApp").controller("MainCtrl",["$scope","Clockservice",function(a,b){var c=a.developers=[];a.add=function(a,b){if(b=parseInt(b,10),!(0>b||isNaN(b)))switch(a){case"developer":c.push({category:a,price:b})}},a.start=function(){for(var a=0,d=0;d<c.length;d++)a+=c[d].price;b.startTicking(a)}}]),angular.module("clockApp").service("Clockservice",["$interval","$rootScope",function(a,b){var c;this.startTicking=function(b){this.costPerHour=b,this.timer&&a.cancel(c),this.started=new Date,this.timer=a(this.tick.bind(this),1e3/24)},this.tick=function(){var a=new Date-this.started,c=this.costPerHour/36e5*a;b.$broadcast("tick",a,c)}}]),angular.module("clockApp").directive("clock",[function(){return{template:'<div class="clock-container"><div id="clock"></div><h1 class="spent">Spent: ${{spent}}</h1><audio preload="auto" id="coin" src="coin.mp3"></audio><audio preload="auto" id="cash" src="cash.mp3"></audio></div>',restrict:"E",link:function(a){var b=300,c={stroke:"#fff","stroke-width":2},d=Raphael("clock","100%","100%");d.setViewBox(0,0,600,600,!1),d.customAttributes.arc=function(a,c,d,e){var f,g=360/c*a,h=(90-g)*Math.PI/180,i=b+d*Math.cos(h),j=b-d*Math.sin(h);return f=c==a?[["M",b,b-d],["A",d,d,0,1,1,b,b-d]]:[["M",b,b-d],["A",d,d,0,+(g>180),1,i,j]],{path:f,stroke:e}};var e=function(a,b,c,d,e){a.animate({arc:[b,c,d,e]})},f=d.path().attr(c).attr({arc:[0,60,b-30,"green"]}),g=d.path().attr(c).attr({arc:[0,60,b-20,"blue"]}),h=d.path().attr(c).attr({arc:[0,12,b-10,"red"]});a.spent=0,a.$on("tick",function(c,d,i){var j=d/1e3,k=j/60,l=k/60;e(f,j%60,60,b-10,"green"),e(g,k%60,60,b-20,"blue"),e(h,l%60,60,b-30,"red");var m=parseInt(i,10);a.spent-m&&(document.getElementById("coin").play(),m%100==0&&document.getElementById("cash").play()),a.spent=m})}}}]),angular.module("clockApp").controller("TickCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("clockApp").service("Playsound",function a(){window.AudioContext=window.AudioContext||window.webkitAudioContext;var a=function(){};return a.prototype.play=function(){this.source.start(0)},a});